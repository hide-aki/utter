{"version":3,"sources":["webpack:///./layouts/confirm-email.js"],"names":["styles","theme","root","backgroundColor","height","text","color","masthead","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default","padding","margin","maxWidth","flexDirection","section","ConfirmEmail","confirmation","_callee3","controller","fetchPromise","timeoutId","_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","wrap","_context3","prev","next","process","AbortController","signal","fetch","concat","_this","props","match","params","token","setTimeout","abort","_callee","res","_context","t0","t1","sent","t2","setState","call","clearTimeout","stop","classes","this","state","react__WEBPACK_IMPORTED_MODULE_9___default","createElement","Fragment","react_helmet_async__WEBPACK_IMPORTED_MODULE_10__","charset","name","content","rel","href","_components__WEBPACK_IMPORTED_MODULE_14__","className","_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_12___default","variant","align","gutterBottom","Component","compose","react_apollo__WEBPACK_IMPORTED_MODULE_11__","withStyles","_default","__webpack_exports__"],"mappings":"6lHASA,IAAMA,OAAS,SAAAC,GAAK,MAAK,CACvBC,KAAM,CACJC,gBADI,QAEJC,OAAQ,QAEVC,KAAM,CACJC,MAAO,SAETC,SAAQC,6EAAA,CACNC,QADM,EACGR,eACTS,OAFM,OAGNC,SAAU,KAHJ,2BAIwB,CAC5BC,cAAe,WAGnBC,QAAOL,6EAAA,CACLC,QADK,EACIR,eACTG,OAFK,QAGLO,SAAU,KAHL,2BAIyB,CAC5BC,cAAe,aAKfE,2nBACI,CACNC,aAAc,mVAGI,SAAAC,IAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAAC,gEAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OACHC,4BAEPT,EAAa,IADsBU,gBAE1BV,EAF0BW,OAInCV,EAAeW,MAAK,GAAAC,OALbJ,4BAKa,uBAAAI,OACOC,EAAAC,MAAAC,MAAAC,OALQC,QASnChB,EAAYiB,WAAW,kBAAMnB,EAANoB,SATY,KAWzCnB,8KAAkB,SAAAoB,EAAAC,GAAA,OAAAnB,gEAAAC,EAAAC,KAAA,SAAAkB,GAAA,cAAAA,EAAAhB,KAAAgB,EAAAf,MAAA,cAAAe,EAAAC,GAAAV,EAAAS,EAAAf,KAAA,EAGMc,EAHNlC,OAAA,OAAAmC,EAAAE,GAAAF,EAAAG,KAAAH,EAAAI,GAAA,CAGd7B,aAHcyB,EAAAE,IAAAF,EAAAC,GAAAI,SAAAC,KAAAN,EAAAC,GAAAD,EAAAI,IAOhBG,gBAPgB,wBAAAP,EAAAQ,SAAAV,MAAlBpB,uDAbgB,wBAAAK,EAAAyB,SAAAhC,uOAmCX,IACAiC,EAAWC,KADXlB,MAAAiB,QAEAlC,EAAgBmC,KAFhBC,MAAApC,aAIP,OACEqC,2CAAA/B,EAAAgC,cAACD,2CAAA/B,EAADiC,SAAA,KACEF,2CAAA/B,EAAAgC,cAAAE,iDAAA,OACEH,2CAAA/B,EAAAgC,cAAA,QAAMG,QAAQ,UACdJ,2CAAA/B,EAAAgC,cAAA,QACEI,KADF,WAEEC,QAAQ,0DAEVN,2CAAA/B,EAAAgC,cAAA,QAAMI,KAAN,SAAoBC,QAAQ,cAC5BN,2CAAA/B,EAAAgC,cAAA,aAPF,6BAQED,2CAAA/B,EAAAgC,cAAA,QAAMM,IAAN,YAAsBC,KAAK,qCAE7BR,2CAAA/B,EAAAgC,cAAAQ,0CAAA,GAAWC,UAAWb,EAAQ/C,MAC5BkD,2CAAA/B,EAAAgC,cAAAQ,0CAAA,GAASC,UAAWb,EAAQpC,SAC1BuC,2CAAA/B,EAAAgC,cAAAU,mEAAA1C,EAAA,CACE2C,QADF,KAEEC,MAFF,SAGEH,UAAWb,EAHb5C,KAIE6D,cAAY,GAlBtBnD,iJA5CuBoD,uDAwEZC,qDAAOC,2CAAA,EAEpBC,0EAFaF,iCAAfG,oCAAeC,oBAAA,8KAlGTxE,4GA0BAc,yeA1BAd,+FA0BAc","file":"bundle.confirm-email.9b460f42fdf8c2e34c40.js","sourcesContent":["import React, {Component} from \"react\"\nimport {Helmet} from \"react-helmet-async\"\nimport {compose, withApollo} from \"react-apollo\"\nimport Typography from \"@material-ui/core/Typography\"\nimport {withStyles} from \"@material-ui/core/styles\"\n\n/* import gql from \"graphql-tag\" */\nimport {Container, Section} from \"../components\"\n\nconst styles = theme => ({\n  root: {\n    backgroundColor: \"black\",\n    height: \"100%\"\n  },\n  text: {\n    color: \"white\"\n  },\n  masthead: {\n    padding: theme.spacing.unit * 1,\n    margin: \"auto\",\n    maxWidth: 900,\n    [`@media (max-width:770px)`]: {\n      flexDirection: \"column\"\n    }\n  },\n  section: {\n    padding: theme.spacing.unit * 1,\n    height: \"100vh\",\n    maxWidth: 900,\n    [`@media (max-width:770px)`]: {\n      flexDirection: \"column\"\n    }\n  }\n})\n\nclass ConfirmEmail extends Component {\n  state = {\n    confirmation: \"\"\n  }\n\n  componentDidMount = async () => {\n    const apiUrl = process.env.API_URL\n    if (process.env.NODE_ENV === \"production\") {\n      const controller = new AbortController()\n      const signal = controller.signal\n\n      const fetchPromise = fetch(\n        `${apiUrl}/api/users/confirm/${this.props.match.params.token}`\n      )\n\n      // 5 second timeout:\n      const timeoutId = setTimeout(() => controller.abort(), 5000)\n\n      fetchPromise.then(async res => {\n        // completed request before timeout fired\n        this.setState({\n          confirmation: await res.text()\n        })\n\n        // If you only wanted to timeout the request, not the response, add:\n        clearTimeout(timeoutId)\n      })\n    } else {\n      fetch(\n        `http://192.168.68.8:3010/api/users/confirm/${\n          this.props.match.params.token\n        }`\n      ).then(async res => {\n        this.setState({\n          confirmation: await res.text()\n        })\n      })\n    }\n  }\n\n  render() {\n    const {classes} = this.props\n    const {confirmation} = this.state\n    /* Your email account has been confirmed. */\n    return (\n      <React.Fragment>\n        <Helmet>\n          <meta charset=\"utf-8\" />\n          <meta\n            name=\"viewport\"\n            content=\"width=device-width, initial-scale=1, shrink-to-fit=no\"\n          />\n          <meta name=\"author\" content=\"Isaac Pak\" />\n          <title>Utterzone | Confirm Email</title>\n          <link rel=\"canonical\" href=\"https://utterzone/confirm-email\" />\n        </Helmet>\n        <Container className={classes.root}>\n          <Section className={classes.section}>\n            <Typography\n              variant=\"h6\"\n              align=\"center\"\n              className={classes.text}\n              gutterBottom>\n              {confirmation}\n            </Typography>\n          </Section>\n        </Container>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default compose(\n  withApollo,\n  withStyles(styles)\n)(ConfirmEmail)\n"],"sourceRoot":""}